/* ===== Calendar (scoped for block) â€” SG tokens / typography / radius =====
   Uses:
   Colors:  --color-bg/surface/card/border/text/muted/brand/brand-soft
   Buttons: --btn-primary-bg/text, --btn-secondary-bg/text
   Radius:  --radius-card/btn/input
   Type:    --font-body/head/btn, --fs-*, --fw-*, --it-*, --ul-*
   Shadow:  --shadow-soft, --glow-brand
*/

/* ===================== Bridges (tokens) ===================== */
.blk-calendar{
  /* ===== Typography bridges ===== */
  --cal-font-body: var(--font-body, Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif);
  --cal-font-head: var(--font-head, var(--cal-font-body));
  --cal-font-btn:  var(--font-btn,  var(--cal-font-body));

  --cal-fs-body: var(--fs-body, 14px);
  --cal-fw-body: var(--fw-body, 400);
  --cal-it-body: var(--it-body, normal);
  --cal-ul-body: var(--ul-body, none);

  --cal-fs-h1: var(--fs-h1, 22px);
  --cal-fs-h2: var(--fs-h2, 18px);
  --cal-fs-h3: var(--fs-h3, 16px);
  --cal-fw-head: var(--fw-head, 800);
  --cal-it-head: var(--it-head, normal);
  --cal-ul-head: var(--ul-head, none);

  --cal-fs-btn: var(--fs-btn, 14px);
  --cal-fw-btn: var(--fw-btn, 800);
  --cal-it-btn: var(--it-btn, normal);
  --cal-ul-btn: var(--ul-btn, none);

  /* ===== Colors bridges ===== */
  --acc:   var(--color-brand, #7C5CFF);
  --onAcc: var(--btn-primary-text, #ffffff);
  --text:  var(--color-text, #e8f0ff);
  --muted: var(--color-muted, #97aac4);

  /* TG-safe backgrounds */
  --cardBg:     var(--color-card, #101827);
  --cardBorder: var(--color-border, #263048);
  --chipBg:     var(--color-surface, #121a2a);
  --pageBg:     var(--color-bg, #0f1219);

  /* ===== Radius bridges ===== */
  --radiusInput: var(--radius-input, 12px);
  --radiusBtn:   var(--radius-btn, 14px);
  --radiusCard:  var(--radius-card, 16px);

  /* spacing */
  --gap: 8px;

  /* controls sizing (iPhone-ish) */
  --ctl-h: 36px;        /* month nav + chips/slots height */
  --day-h: 42px;        /* day cell height */
  --btn-h: 48px;        /* main action buttons */

  /* states */
  --cal-ring: var(--glow-brand, 0 0 0 3px rgba(124,92,255,.26));
  --cal-shadow: var(--shadow-soft, 0 8px 24px rgba(0,0,0,.12));

  /* ===== Unified button tokens (PRIMARY/SECONDARY) ===== */
  --cal-btn1-bg:   var(--btn-primary-bg, var(--acc));
  --cal-btn1-text: var(--btn-primary-text, #ffffff);

  --cal-btn2-bg:   var(--btn-secondary-bg, rgba(255,255,255,.08));
  --cal-btn2-text: var(--btn-secondary-text, var(--text));
  --cal-btn2-border: var(--cardBorder);
}

/* ===================== Base typography ===================== */
.blk-calendar, .blk-calendar *{ font-family: var(--cal-font-body); }
.blk-calendar{
  font-size: var(--cal-fs-body);
  font-weight: var(--cal-fw-body);
  font-style: var(--cal-it-body);
  text-decoration: var(--cal-ul-body);
  color: var(--text);
  -webkit-tap-highlight-color: transparent;
}

/* ===================== Card ===================== */
.blk-calendar .cal-card{
  border: 1px solid var(--cardBorder);
  border-radius: var(--radiusCard);
  padding: 14px;
  background: var(--cardBg);
  box-shadow: var(--cal-shadow);
}

/* ===================== Block header ===================== */
.blk-calendar .blk-head{ margin-bottom: 10px; }
.blk-calendar .blk-title{
  font-family: var(--cal-font-head);
  font-size: var(--cal-fs-h2);
  font-weight: var(--cal-fw-head);
  font-style: var(--cal-it-head);
  text-decoration: var(--cal-ul-head);
  line-height: 1.15;
}

/* ===================== Month bar ===================== */
.blk-calendar .cal-monthbar{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: var(--gap);
  margin: 8px 0 8px;
}

.blk-calendar .month-title{
  font-family: var(--cal-font-head);
  font-size: var(--cal-fs-h3);
  font-weight: var(--cal-fw-head);
  font-style: var(--cal-it-head);
  text-decoration: var(--cal-ul-head);
  opacity: .92;
  text-align:center;
  flex: 1 1 auto;
  min-width: 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* (1) Month navigation buttons = SECONDARY buttons */
.blk-calendar .cal-monthbar .nav{
  display:inline-flex;
  align-items:center;
  justify-content:center;

  min-width: 44px;
  height: var(--ctl-h);
  padding: 0 12px;

  border-radius: var(--radiusBtn);
  border: 1px solid var(--cal-btn2-border);
  background: var(--cal-btn2-bg);
  color: var(--cal-btn2-text);
  cursor: pointer;

  font-family: var(--cal-font-btn);
  font-size: var(--cal-fs-btn);
  font-weight: var(--cal-fw-btn);
  font-style: var(--cal-it-btn);
  text-decoration: var(--cal-ul-btn);
  line-height: 1;

  transition: transform .12s ease, filter .12s ease, box-shadow .12s ease;
}
.blk-calendar .cal-monthbar .nav:hover{ filter: brightness(1.05); }
.blk-calendar .cal-monthbar .nav:active{ transform: translateY(1px); }
.blk-calendar .cal-monthbar .nav:focus-visible{
  outline: none;
  box-shadow: var(--cal-ring);
}

/* ===================== Week header & month grid ===================== */
.blk-calendar .cal-weekhead{
  display:grid;
  grid-template-columns: repeat(7,1fr);
  gap: var(--gap);
  margin-bottom: 8px;
}
.blk-calendar .cal-weekhead > div{
  text-align:center;
  color: var(--muted);
  font-size: 12px;
  font-weight: calc(var(--cal-fw-body) + 200);
  opacity: .9;
}

/* ===================== Month grid ===================== */
.blk-calendar .cal-month{
  display:grid;
  grid-template-columns: repeat(7,1fr);
  gap: var(--gap);
  margin-bottom: 12px;
}

/* Day cell = H3 size */
.blk-calendar .day{
  height: var(--day-h);
  padding: 0 10px;
  display:flex;
  align-items:center;
  justify-content:center;
  text-align:center;

  border-radius: var(--radiusInput);
  background: var(--chipBg);
  color: var(--text);
  border: 1px solid var(--cardBorder);
  cursor:pointer;
  user-select:none;

  font-family: var(--cal-font-body);
  font-size: var(--cal-fs-h3);
  font-weight: var(--cal-fw-body);
  font-style: var(--cal-it-body);
  text-decoration: var(--cal-ul-body);
  line-height: 1;

  transition: transform .12s ease, filter .12s ease, box-shadow .12s ease, border-color .12s ease;
}
.blk-calendar .day:hover{ filter: brightness(1.05); }
.blk-calendar .day:active{ transform: translateY(1px); }

/* disabled */
.blk-calendar .day.disabled{
  opacity:.35;
  filter: grayscale(1);
  cursor: default;
  pointer-events: none;
}

/* today = subtle ring (brand) */
.blk-calendar .day.today{
  border-color: rgba(255,255,255,.14);
  box-shadow: 0 0 0 2px rgba(124,92,255,.18);
}

/* active day */
.blk-calendar .day.is-active{
  background: var(--cal-btn1-bg);
  color: var(--cal-btn1-text);
  border-color: transparent;
  box-shadow: 0 10px 24px rgba(0,0,0,.18);
}

/* ===================== Groups ===================== */
.blk-calendar .cal-group{
  border:1px solid var(--cardBorder);
  border-radius: var(--radiusCard);
  padding: 10px;
  margin-top: 10px;
  background: var(--cardBg);
}

/* Group headers = Head (H3) */
.blk-calendar .cal-group__head{
  font-family: var(--cal-font-head);
  font-size: var(--cal-fs-h3);
  font-weight: var(--cal-fw-head);
  font-style: var(--cal-it-head);
  text-decoration: var(--cal-ul-head);
  opacity: .92;
  margin-bottom: 8px;
}

/* ===================== Durations / chips ===================== */
.blk-calendar .cal-durations{
  display:flex;
  flex-wrap:wrap;
  gap: var(--gap);
}

/* (2) chips = SECONDARY; active = PRIMARY */
.blk-calendar .chip{
  height: var(--ctl-h);
  padding: 0 12px;
  display:inline-flex;
  align-items:center;
  justify-content:center;

  border-radius: var(--radiusBtn);
  border: 1px solid var(--cal-btn2-border);
  background: var(--cal-btn2-bg);
  color: var(--cal-btn2-text);
  cursor:pointer;
  user-select:none;

  font-family: var(--cal-font-btn);
  font-size: var(--cal-fs-btn);
  font-weight: var(--cal-fw-btn);
  font-style: var(--cal-it-btn);
  text-decoration: var(--cal-ul-btn);
  line-height: 1;

  transition: transform .12s ease, filter .12s ease, box-shadow .12s ease;
}
.blk-calendar .chip:hover{ filter: brightness(1.05); }
.blk-calendar .chip:active{ transform: translateY(1px); }
.blk-calendar .chip:focus-visible{ outline:none; box-shadow: var(--cal-ring); }

.blk-calendar .chip.is-active{
  background: var(--cal-btn1-bg);
  color: var(--cal-btn1-text);
  border-color: transparent;
  box-shadow: var(--cal-ring);
}

/* ===================== Services list + switches ===================== */
.blk-calendar .services-list{
  display:flex;
  flex-direction:column;
  gap:10px;
}

/* (3) Service row stays surface-like (not button) */
.blk-calendar .service-row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  padding: 10px 12px;

  border:1px solid var(--cardBorder);
  border-radius: var(--radiusInput);
  background: var(--chipBg);
}

.blk-calendar .srv-title{
  opacity:.95;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;

  font-family: var(--cal-font-body);
  font-size: var(--cal-fs-body);
  font-weight: var(--cal-fw-body);
}

/* (3) Switch: OFF = SECONDARY, ON = PRIMARY */
.blk-calendar .srv-switch{
  position:relative;
  width: 46px;
  height: 26px;
  border-radius: 999px;

  background: var(--cal-btn2-bg);
  border: 1px solid var(--cal-btn2-border);
  cursor:pointer;

  flex: 0 0 auto;
  transition: filter .12s ease, box-shadow .12s ease, background .12s ease, border-color .12s ease;
}
.blk-calendar .srv-switch:hover{ filter: brightness(1.05); }
.blk-calendar .srv-switch:focus-visible{ outline:none; box-shadow: var(--cal-ring); }

.blk-calendar .srv-switch::after{
  content:'';
  position:absolute;
  top:2px;
  left:2px;
  width:22px;
  height:22px;
  border-radius:50%;

  background: rgba(255,255,255,.92);
  transition: left .18s ease, background .18s ease, transform .18s ease;
}

.blk-calendar .srv-switch.is-on{
  background: var(--cal-btn1-bg);
  border-color: transparent;
  box-shadow: var(--cal-ring);
}
.blk-calendar .srv-switch.is-on::after{
  left: 22px;
  background: var(--cal-btn1-text);
}

/* ===================== Slots ===================== */
.blk-calendar .cal-slots{
  display:flex;
  flex-wrap:wrap;
  gap: var(--gap);
}

/* (4) slots = SECONDARY; active = PRIMARY */
.blk-calendar .slot{
  height: var(--ctl-h);
  padding: 0 12px;
  display:inline-flex;
  align-items:center;
  justify-content:center;

  border: 1px solid var(--cal-btn2-border);
  border-radius: var(--radiusBtn);
  background: var(--cal-btn2-bg);
  color: var(--cal-btn2-text);
  cursor:pointer;

  font-family: var(--cal-font-btn);
  font-size: var(--cal-fs-btn);
  font-weight: var(--cal-fw-btn);
  font-style: var(--cal-it-btn);
  text-decoration: var(--cal-ul-btn);
  line-height: 1;

  transition: transform .12s ease, filter .12s ease, box-shadow .12s ease;
}
.blk-calendar .slot:hover{ filter: brightness(1.05); }
.blk-calendar .slot:active{ transform: translateY(1px); }
.blk-calendar .slot:focus-visible{ outline:none; box-shadow: var(--cal-ring); }

.blk-calendar .slot.is-active{
  background: var(--cal-btn1-bg);
  color: var(--cal-btn1-text);
  border-color: transparent;
  box-shadow: var(--cal-ring);
}

/* ===================== Actions buttons ===================== */
.blk-calendar .cal-actions{
  display:flex;
  margin-top: 12px;
}
.blk-calendar .cal-actions .btn{ width: 100%; }

.blk-calendar .btn{
  height: var(--btn-h);
  padding: 0 14px;

  display:inline-flex;
  align-items:center;
  justify-content:center;

  border-radius: var(--radiusBtn);
  border: 1px solid var(--cal-btn2-border);
  background: var(--cal-btn2-bg);
  color: var(--cal-btn2-text);
  cursor: pointer;

  font-family: var(--cal-font-btn);
  font-size: var(--cal-fs-btn);
  font-weight: var(--cal-fw-btn);
  font-style: var(--cal-it-btn);
  text-decoration: var(--cal-ul-btn);
  line-height: 1;

  transition: transform .12s ease, filter .12s ease, box-shadow .12s ease;
}
.blk-calendar .btn:hover{ filter: brightness(1.05); }
.blk-calendar .btn:active{ transform: translateY(1px); }
.blk-calendar .btn:focus-visible{ outline: none; box-shadow: var(--cal-ring); }

/* (5) primary */
.blk-calendar .btn--primary{
  background: var(--cal-btn1-bg);
  color: var(--cal-btn1-text);
  border-color: transparent;
  box-shadow: var(--cal-shadow);
}
.blk-calendar .btn--primary:hover{ filter: brightness(1.03); }

/* (6) ghost = REAL secondary */
.blk-calendar .btn--ghost{
  background: var(--cal-btn2-bg);
  color: var(--cal-btn2-text);
  border: 1px solid var(--cal-btn2-border);
}

/* ===================== Small polish ===================== */
/* reduce motion if user prefers */
@media (prefers-reduced-motion: reduce){
  .blk-calendar .day,
  .blk-calendar .chip,
  .blk-calendar .slot,
  .blk-calendar .btn,
  .blk-calendar .srv-switch,
  .blk-calendar .srv-switch::after{
    transition: none !important;
  }
}
