/* ===== Stars product card (scoped for block) ====================== */
/* Uses global app tokens + SG typography tokens (works like Calendar: em-based) */

.blk-shop-stars{
  padding: var(--ss-pad, 0);

  /* ===== Theme colors fallbacks (TG-safe) ===== */
  --ss-cardBg: var(--color-card, #101827);
  --ss-cardBorder: var(--color-border, #263048);
  --ss-imgBg: var(--color-surface, #121a2a);

  /* brand / button bg (support both new + legacy aliases) */
  --ss-brand: var(--btn-primary-bg, var(--btnPrimaryBg, var(--color-brand, #7C5CFF)));
  /* button text (support new + legacy aliases) */
  --ss-onBrand: var(--btn-primary-text, var(--btnPrimaryText, #fff));

  /* ===== Typography bridges ===== */
  --ss-font-body: var(--font-body, Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif);
  --ss-font-head: var(--font-head, var(--ss-font-body));
  --ss-font-btn:  var(--font-btn,  var(--ss-font-body));

  --ss-fw-body: var(--fw-body, 400);
  --ss-fw-head: var(--fw-head, 800);
  --ss-fw-btn:  var(--fw-btn,  800);

  --ss-it-body: var(--it-body, normal);
  --ss-it-head: var(--it-head, normal);
  --ss-it-btn:  var(--it-btn,  normal);

  --ss-ul-body: var(--ul-body, none);
  --ss-ul-head: var(--ul-head, none);
  --ss-ul-btn:  var(--ul-btn,  none);

  /* ===== Sizes: THIS is the key =====
     font-size of the block = Body size
     everything inside uses em */
  font-size: var(--fs-body, 14px);

  /* default style for block text */
  font-family: var(--ss-font-body);
  font-weight: var(--ss-fw-body);
  font-style: var(--ss-it-body);
  text-decoration: var(--ss-ul-body);

  /* block outer spacing (host can override) */
  --ss-pad: 0;
}

/* Enable color-mix only if supported */
@supports (background: color-mix(in srgb, #000 50%, transparent)){
  .blk-shop-stars{
    --ss-cardBg: var(--card-bg, color-mix(in srgb, var(--color-card, #101827) 92%, transparent));
    --ss-cardBorder: var(--card-border, color-mix(in srgb, var(--color-border, #263048) 72%, transparent));
    --ss-imgBg: color-mix(in srgb, var(--color-surface, #121a2a) 100%, transparent);
  }
}

/* Card */
.blk-shop-stars .ss-card{
  border-radius: var(--radius-card, 16px);
  overflow: hidden;

  background: var(--ss-cardBg);
  border: 1px solid var(--ss-cardBorder);

  color: var(--color-text, #e8f0ff);
  box-shadow: var(--shadow-soft, 0 8px 24px rgba(0,0,0,.12));

  /* richer look */
  position: relative;
}

.blk-shop-stars .ss-img{
  height: 160px;
  background: var(--ss-imgBg);
  background-size: cover;
  background-position: center;
  position: relative;
}

/* subtle top overlay for readability */
.blk-shop-stars .ss-img::after{
  content:"";
  position:absolute;
  inset:0;
  background: linear-gradient(180deg, rgba(0,0,0,.18), rgba(0,0,0,0) 55%);
  pointer-events:none;
}

.blk-shop-stars .ss-body{
  padding: 1em;            /* было 14px -> теперь от body */
  display:flex;
  flex-direction:column;
  gap: 0.7em;              /* было 10px */
}

/* Title = HEAD typography + em size */
.blk-shop-stars .ss-title{
  font-family: var(--ss-font-head);
  font-weight: var(--ss-fw-head);
  font-style: var(--ss-it-head);
  text-decoration: var(--ss-ul-head);

  font-size: 1.15em;       /* ~16px at body=14 */
  line-height: 1.2;
  color: var(--color-text, inherit);
}

/* Description = BODY typography + em size */
.blk-shop-stars .ss-desc{
  font-family: var(--ss-font-body);
  font-weight: var(--ss-fw-body);
  font-style: var(--ss-it-body);
  text-decoration: var(--ss-ul-body);

  font-size: 0.93em;       /* ~13px at body=14 */
  line-height: 1.35;
  color: var(--color-muted, rgba(255,255,255,.7));
}

.blk-shop-stars .ss-row{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 0.85em;             /* было 12px */
  flex-wrap: wrap;
}

/* Price — BODY typography, can be strong */
.blk-shop-stars .ss-price{
  font-family: var(--ss-font-body);
  font-style: var(--ss-it-body);
  text-decoration: var(--ss-ul-body);

  font-weight: 900;        /* можно заменить на var(--ss-fw-body) если хочешь */
  font-size: 1.05em;       /* ~15px at body=14 */
  color: var(--color-text, inherit);
}

/* Button = BTN typography + button size token */
.blk-shop-stars .ss-btn{
  border:0;
  border-radius: var(--radius-btn, 14px);

  padding: 0.72em 1em;     /* было 10px 14px */
  cursor: pointer;

  font-family: var(--ss-font-btn);
  font-weight: var(--ss-fw-btn);
  font-style: var(--ss-it-btn);
  text-decoration: var(--ss-ul-btn);

  /* IMPORTANT: button size is separate slider */
  font-size: var(--fs-btn, 14px);

  background: var(--ss-brand);
  color: var(--ss-onBrand);

  box-shadow: 0 10px 22px rgba(124,92,255,.22);
  transition: transform .12s ease, filter .12s ease, opacity .12s ease;
}

@supports (background: color-mix(in srgb, #000 50%, transparent)){
  .blk-shop-stars .ss-btn{
    box-shadow: color-mix(in srgb, var(--color-brand, #7C5CFF) 22%, transparent) 0 10px 22px;
  }
}

.blk-shop-stars .ss-btn:active{ transform: translateY(1px); }

.blk-shop-stars .ss-btn[disabled]{
  opacity: .65;
  cursor: default;
  transform: none;
  filter: saturate(.9);
}

.blk-shop-stars .ss-btn[data-loading="1"]{
  position: relative;
}

.blk-shop-stars .ss-btn[data-loading="1"]::after{
  content: "";
  width: 1em;
  height: 1em;
  border-radius: 999px;
  border: 2px solid rgba(255,255,255,.55);
  border-top-color: rgba(255,255,255,.12);
  display: inline-block;
  vertical-align: -0.15em;
  margin-left: .55em;
  animation: ssSpin 0.9s linear infinite;
}

@keyframes ssSpin{ to{ transform: rotate(360deg); } }

/* Hint/status */
.blk-shop-stars .ss-hint{
  padding: .7em .9em;
  border-radius: calc(var(--radius-input, 12px) + 2px);
  border: 1px solid var(--ss-cardBorder);
  background: var(--ss-imgBg);
  font-size: .92em;
  line-height: 1.35;
  color: var(--color-text, inherit);
}

.blk-shop-stars .ss-hint.is-ok{
  border-color: var(--color-success, #2dd4bf);
}
.blk-shop-stars .ss-hint.is-warn{
  border-color: var(--color-warning, #fbbf24);
}
.blk-shop-stars .ss-hint.is-bad{
  border-color: var(--color-danger, #fb7185);
}

@supports (background: color-mix(in srgb, #000 50%, transparent)){
  .blk-shop-stars .ss-hint.is-ok{
    border-color: color-mix(in srgb, var(--color-success, #2dd4bf) 55%, var(--ss-cardBorder));
    box-shadow: 0 0 0 2px color-mix(in srgb, var(--color-success, #2dd4bf) 22%, transparent);
  }
  .blk-shop-stars .ss-hint.is-warn{
    border-color: color-mix(in srgb, var(--color-warning, #fbbf24) 55%, var(--ss-cardBorder));
    box-shadow: 0 0 0 2px color-mix(in srgb, var(--color-warning, #fbbf24) 18%, transparent);
  }
  .blk-shop-stars .ss-hint.is-bad{
    border-color: color-mix(in srgb, var(--color-danger, #fb7185) 55%, var(--ss-cardBorder));
    box-shadow: 0 0 0 2px color-mix(in srgb, var(--color-danger, #fb7185) 18%, transparent);
  }
}

@supports not (background: color-mix(in srgb, #000 50%, transparent)){
  .blk-shop-stars .ss-hint.is-ok{ border-color: rgba(45,212,191,.55); }
  .blk-shop-stars .ss-hint.is-warn{ border-color: rgba(251,191,36,.55); }
  .blk-shop-stars .ss-hint.is-bad{ border-color: rgba(251,113,133,.55); }
}
