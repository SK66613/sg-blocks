/* ===== FLAPPY LITE+ (from app.css) — block version (not fixed) ===== */

/* container */
.flappy{
  position:relative;            /* было fixed */
  width:100%;
  min-height:420px;             /* чтобы в конструкторе не схлопнулось */
  border-radius:16px;
  overflow:hidden;
  background:#000;
  color:#fff;
  display:block;                /* было display:none + is-open */
}

/* если тебе нужен режим "скрыто/показать", оставь классы */
.flappy.is-open{ display:block; }

/* wrap */
.flappy__wrap{
  position:absolute; inset:0;
  display:flex; flex-direction:column;
  padding: calc(env(safe-area-inset-top,0px)+8px) 14px calc(env(safe-area-inset-bottom,0px)+14px);
}

/* HUD */
.fl-hud{
  width:100%;
  max-width:520px;
  margin:0 auto 8px;
  position:relative;
  z-index:30;
}
.fl-hud__row{ display:grid; justify-items:center; gap:6px; }
.fl-score{
  font:600 clamp(28px,8vw,48px)/1 Inter,system-ui;
  text-shadow:0 2px 10px rgba(0,0,0,.25)
}
.fl-bar{
  width:100%; height:4px; border-radius:999px;
  background:rgba(255,255,255,.18); overflow:hidden
}
.fl-bar>i{
  display:block; height:100%; width:100%;
  background:#fff; transform-origin:left center;
}

/* HUD: coins + shield */
.fl-stats{ display:flex; justify-content:center; gap:14px; margin-top:6px; }
.fl-stat{
  display:flex; align-items:center; gap:8px;
  padding:6px 10px; border-radius:999px;
  background:rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.1);
  font:800 13px/1 Inter;
}
.fl-ico{ width:18px; height:18px; background:center/contain no-repeat; opacity:.95 }
#fl-coin-count{ font:800 14px/1 Inter }
.fl-shield-wrap{ display:flex; align-items:center; gap:8px; }
.fl-shield-bar{
  width:88px; height:4px; border-radius:999px;
  background:rgba(255,255,255,.18); overflow:hidden
}
.fl-shield-bar>i{
  display:block; height:100%; width:100%;
  background:#6be3ff; transform-origin:left center;
}

/* Stage */
.fl-stage{
  flex:1;
  position:relative;
  overflow:hidden;
  border-radius:16px;
  background: linear-gradient(180deg,#0a0c14 0%, #0f1626 100%);
  z-index:1;
  min-height:360px; /* чтобы гарантированно было поле */
}
.fl-hint{
  position:absolute; left:0; right:0; top:18%;
  text-align:center;
  font:800 16px/1.2 Inter;
  opacity:.75;
  pointer-events:none;
  z-index:15;
}

/* Sprites sizes (override via JS) */
:root{
  --bird-w: 48px; --bird-h: 36px;
  --pipe-w: 76px;
  --coin-w: 32px; --coin-h: 32px;
  --pow-w: 34px;  --pow-h: 34px;
}

/* Bird */
.fl-bird{
  position:absolute;
  width:var(--bird-w); height:var(--bird-h);
  transform:translate(-50%,-50%) rotate(0deg);
  background: radial-gradient(circle at 35% 35%, #ffdd66, #ff9a00);
  border-radius:14px;
  box-shadow:0 8px 18px rgba(255,154,0,.35), inset 0 0 10px rgba(255,255,255,.25);
  will-change: transform, top, left;
  z-index:20;
}
.fl-bird--sprite{ background:center/contain no-repeat; border-radius:0; box-shadow:none; }
.fl-bird--shield{ box-shadow:0 0 0 3px rgba(107,227,255,.8), 0 0 30px rgba(107,227,255,.55); }

/* Pipes */
.fl-pipe-part{
  position:absolute;
  width:var(--pipe-w);
  background: linear-gradient(180deg,#6BFF7A,#1ED760);
  border:1px solid rgba(255,255,255,.08);
  box-shadow:0 10px 22px rgba(30,215,96,.25), inset 0 0 10px rgba(255,255,255,.15);
  z-index:10;
}
.fl-pipe--sprite{ background: center / 100% 100% no-repeat; border:none; box-shadow:none; }

/* Items */
.fl-coin,.fl-power{
  position:absolute;
  transform:translate(-50%,-50%);
  will-change: left, top;
  width:var(--coin-w); height:var(--coin-h);
  background:center/contain no-repeat;
  z-index:12;
}
.fl-power{ width:var(--pow-w); height:var(--pow-h); }

/* Result overlay */
.fl-result{
  position:absolute; inset:0;
  display:none;
  place-items:center;
  padding:16px;
  z-index:9999;
  pointer-events:none !important;
}
.fl-result.show{ display:grid; }

.fl-card{ pointer-events:auto; }
.fl-card{
  width:min(100%,520px);
  background:rgba(255,255,255,.06);
  border:1px solid rgba(255,255,255,.10);
  border-radius:18px;
  padding:12px 16px;
  display:grid;
  grid-template-columns:1fr 1fr auto;
  gap:14px;
  align-items:center;
}
.fl-cell{ display:grid; gap:4px; justify-items:center }
.fl-val{ font:800 20px/1 Inter }
.fl-sub{ font:600 12px/1.1 Inter; opacity:.8 }
.fl-chev{ font:20px/1 Inter; opacity:.6 }

/* CTA bottom */
:root{ --ctaGap: 44px; }
.fl-cta{
  position:absolute;
  left:14px; right:14px;
  bottom: calc(env(safe-area-inset-bottom,0px) + var(--ctaGap));
  display:none;
  z-index:10000 !important;
  pointer-events:auto !important;
}
.fl-cta .btn{ pointer-events:auto !important; }
.fl-cta.show{ display:block; }
.fl-cta .btn{
  width:100%;
  height:52px;
  border-radius:16px;
  font:800 16px/1 Inter;
  background:#fff;
  color:#000;
  border:1px solid #fff;
}

/* Desktop fit */
@media (min-width:900px){
  .flappy__wrap{ max-width:var(--appW,428px); margin:0 auto }
}

/* Shield tuning (as in app.css) */
:root{
  --bird-radius: 50px;
  --shield-ring: 0px;
  --shield-ring-color: rgba(107,227,255,.95);
  --shield-glow-color: rgba(107,227,255,.55);
  --shield-glow-blur: 28px;
  --shield-pulse: 1.6s;
}
.fl-bird{ border-radius: var(--bird-radius); }
.fl-bird--sprite{ border-radius: var(--bird-radius); }

.fl-bird--shield{
  box-shadow: 0 0 var(--shield-glow-blur) var(--shield-glow-color);
  position: relative;
}
.fl-bird--shield::after{
  content:"";
  position:absolute; inset: calc(-1*var(--shield-ring));
  border-radius: inherit;
  border: var(--shield-ring) solid var(--shield-ring-color);
  box-shadow: 0 0 var(--shield-glow-blur) var(--shield-glow-color);
  animation: shieldPulse var(--shield-pulse) ease-in-out infinite;
  pointer-events: none;
}
@keyframes shieldPulse{
  0%  { box-shadow: 0 0 var(--shield-glow-blur) var(--shield-glow-color), 0 0 0 0 rgba(107,227,255,.35); }
  60% { box-shadow: 0 0 calc(var(--shield-glow-blur)*1.2) var(--shield-glow-color), 0 0 0 10px rgba(107,227,255,0); }
  100%{ box-shadow: 0 0 var(--shield-glow-blur) var(--shield-glow-color), 0 0 0 0 rgba(107,227,255,0); }
}

/* Ensure games remain interactive inside preview */
.game-host, .game-host *{ pointer-events:auto; }
